"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1952],{81952:function(Ct,ke,Y){Y.d(ke,{j:function(){return Un}});var J,M,L,H,de,d,q,R,x,g,b,o=Y(97582);(J=q||(q={}))[J.None=0]="None",J[J.Error=1]="Error",J[J.Warn=2]="Warn",J[J.Verbose=3]="Verbose",J[J.Debug=4]="Debug";var h=function(n){return function(){var e=(0,o.pi)({},n.config);return{logger:e.loggerProvider,logLevel:e.logLevel}}},v=function(n,e){var t,i;e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"");try{for(var r=(0,o.XA)(e.split(".")),s=r.next();!s.done;s=r.next()){var u=s.value;if(!(u in n))return;n=n[u]}}catch(c){t={error:c}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}return n},S=function(n,e){return function(){var t,i,r={};try{for(var s=(0,o.XA)(e),u=s.next();!u.done;u=s.next()){var c=u.value;r[c]=v(n,c)}}catch(f){t={error:f}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}return r}},y=function(n,e,t,i,r){return r===void 0&&(r=null),function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var c=t(),f=c.logger,p=c.logLevel;if(p&&p<q.Debug||!p||!f)return n.apply(r,s);var l={type:"invoke public method",name:e,args:s,stacktrace:(Error().stack||"").split(`
`).slice(3).map(function(m){return m.trim()}),time:{start:new Date().toISOString()},states:{}};i&&l.states&&(l.states.before=i());var a=n.apply(r,s);return a&&a.promise?a.promise.then(function(){i&&l.states&&(l.states.after=i()),l.time&&(l.time.end=new Date().toISOString()),f.debug(JSON.stringify(l,null,2))}):(i&&l.states&&(l.states.after=i()),l.time&&(l.time.end=new Date().toISOString()),f.debug(JSON.stringify(l,null,2))),a}},U=function(n){return{promise:n||Promise.resolve()}};(M=R||(R={})).Unknown="unknown",M.Skipped="skipped",M.Success="success",M.RateLimit="rate_limit",M.PayloadTooLarge="payload_too_large",M.Invalid="invalid",M.Failed="failed",M.Timeout="Timeout",M.SystemError="SystemError";var ee="".concat("AMP","_unsent"),G="https://api2.amplitude.com/2/httpapi",w=function(n,e){var t=Math.max(e,1);return n.reduce(function(i,r,s){var u=Math.floor(s/t);return i[u]||(i[u]=[]),i[u].push(r),i},[])},Q=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=R.Unknown),{event:n,code:e,message:t}},be="Amplitude Logger ",ut=function(){function n(){this.logLevel=q.None}return n.prototype.disable=function(){this.logLevel=q.None},n.prototype.enable=function(e){e===void 0&&(e=q.Warn),this.logLevel=e},n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<q.Verbose||console.log("".concat(be,"[Log]: ").concat(e.join(" ")))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<q.Warn||console.warn("".concat(be,"[Warn]: ").concat(e.join(" ")))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<q.Error||console.error("".concat(be,"[Error]: ").concat(e.join(" ")))},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<q.Debug||console.log("".concat(be,"[Debug]: ").concat(e.join(" ")))},n}(),_e=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:q.Warn,loggerProvider:new ut,offline:!1,optOut:!1,serverUrl:G,serverZone:"US",useBatch:!1}},Gt=function(){function n(e){this._optOut=!1;var t,i,r,s,u=_e();this.apiKey=e.apiKey,this.flushIntervalMillis=(t=e.flushIntervalMillis)!==null&&t!==void 0?t:u.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||u.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||u.flushQueueSize,this.instanceName=e.instanceName||u.instanceName,this.loggerProvider=e.loggerProvider||u.loggerProvider,this.logLevel=(i=e.logLevel)!==null&&i!==void 0?i:u.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:u.offline,this.optOut=(r=e.optOut)!==null&&r!==void 0?r:u.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||u.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(s=e.useBatch)!==null&&s!==void 0?s:u.useBatch,this.loggerProvider.enable(this.logLevel);var c=at(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=c.serverZone,this.serverUrl=c.serverUrl}return Object.defineProperty(n.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),n}(),at=function(n,e,t){if(n===void 0&&(n=""),e===void 0&&(e=_e().serverZone),t===void 0&&(t=_e().useBatch),n)return{serverUrl:n,serverZone:void 0};var i,r=["US","EU"].includes(e)?e:_e().serverZone;return{serverZone:r,serverUrl:(i=t,r==="EU"?i?"https://api.eu.amplitude.com/batch":"https://api.eu.amplitude.com/2/httpapi":i?"https://api2.amplitude.com/batch":G)}};function Ie(n){var e="";try{"body"in n&&(e=JSON.stringify(n.body,null,2))}catch{}return e}var jt=function(){function n(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return n.prototype.setup=function(e){var t;return(0,o.mG)(this,void 0,void 0,function(){var i,r=this;return(0,o.Jh)(this,function(s){switch(s.label){case 0:return this.config=e,this.storageKey="".concat(ee,"_").concat(this.config.apiKey.substring(0,10)),[4,(t=this.config.storageProvider)===null||t===void 0?void 0:t.get(this.storageKey)];case 1:return i=s.sent(),this.saveEvents(),i&&i.length>0&&Promise.all(i.map(function(u){return r.execute(u)})).catch(),[2,Promise.resolve(void 0)]}})})},n.prototype.execute=function(e){var t=this;return new Promise(function(i){t.addToQueue({event:e,attempts:0,callback:function(r){return i(r)},timeout:0})})},n.prototype.addToQueue=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];t.filter(function(r){return r.attempts<e.config.flushMaxRetries?(r.attempts+=1,!0):(e.fulfillRequest([r],500,"Event rejected due to exceeded retry count"),!1)}).forEach(function(r){if(e.queue=e.queue.concat(r),r.timeout===0){e.schedule(e.config.flushIntervalMillis);return}setTimeout(function(){r.timeout=0,e.schedule(0)},r.timeout)}),this.saveEvents()},n.prototype.schedule=function(e){var t=this;this.scheduled||this.config.offline||(this.scheduled=setTimeout(function(){t.flush(!0).then(function(){t.queue.length>0&&t.schedule(e)})},e))},n.prototype.flush=function(e){return e===void 0&&(e=!1),(0,o.mG)(this,void 0,void 0,function(){var t,i,r=this;return(0,o.Jh)(this,function(s){switch(s.label){case 0:return this.config.offline?(this.config.loggerProvider.debug("Skipping flush while offline."),[2]):(t=[],i=[],this.queue.forEach(function(u){return u.timeout===0?t.push(u):i.push(u)}),this.queue=i,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),[4,Promise.all(w(t,this.config.flushQueueSize).map(function(u){return r.send(u,e)}))]);case 1:return s.sent(),[2]}})})},n.prototype.send=function(e,t){return t===void 0&&(t=!0),(0,o.mG)(this,void 0,void 0,function(){var i,r,s,u;return(0,o.Jh)(this,function(c){switch(c.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,"Event rejected due to missing API key")];i={api_key:this.config.apiKey,events:e.map(function(p){var l=p.event;return l.extra,(0,o._T)(l,["extra"])}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString()},c.label=1;case 1:return c.trys.push([1,3,,4]),r=at(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(r,i)];case 2:return(s=c.sent())===null?(this.fulfillRequest(e,0,"Unexpected error occurred"),[2]):t?(this.handleResponse(s,e),[3,4]):("body"in s?this.fulfillRequest(e,s.statusCode,"".concat(s.status,": ").concat(Ie(s))):this.fulfillRequest(e,s.statusCode,s.status),[2]);case 3:var f;return u=(f=c.sent())instanceof Error?f.message:String(f),this.config.loggerProvider.error(u),this.fulfillRequest(e,0,u),[3,4];case 4:return[2]}})})},n.prototype.handleResponse=function(e,t){var i=e.status;switch(i){case R.Success:this.handleSuccessResponse(e,t);break;case R.Invalid:this.handleInvalidResponse(e,t);break;case R.PayloadTooLarge:this.handlePayloadTooLargeResponse(e,t);break;case R.RateLimit:this.handleRateLimitResponse(e,t);break;default:this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(i,"' provided for ").concat(t.length,' events"}')),this.handleOtherResponse(t)}},n.prototype.handleSuccessResponse=function(e,t){this.fulfillRequest(t,e.statusCode,"Event tracked successfully")},n.prototype.handleInvalidResponse=function(e,t){var i=this;if(e.body.missingField||e.body.error.startsWith("Invalid API key")){this.fulfillRequest(t,e.statusCode,e.body.error);return}var r=(0,o.ev)((0,o.ev)((0,o.ev)((0,o.ev)([],(0,o.CR)(Object.values(e.body.eventsWithInvalidFields)),!1),(0,o.CR)(Object.values(e.body.eventsWithMissingFields)),!1),(0,o.CR)(Object.values(e.body.eventsWithInvalidIdLengths)),!1),(0,o.CR)(e.body.silencedEvents),!1).flat(),s=new Set(r),u=t.filter(function(c,f){if(s.has(f)){i.fulfillRequest([c],e.statusCode,e.body.error);return}return!0});u.length>0&&this.config.loggerProvider.warn(Ie(e)),this.addToQueue.apply(this,(0,o.ev)([],(0,o.CR)(u),!1))},n.prototype.handlePayloadTooLargeResponse=function(e,t){if(t.length===1){this.fulfillRequest(t,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(Ie(e)),this.config.flushQueueSize/=2,this.addToQueue.apply(this,(0,o.ev)([],(0,o.CR)(t),!1))},n.prototype.handleRateLimitResponse=function(e,t){var i=this,r=Object.keys(e.body.exceededDailyQuotaUsers),s=Object.keys(e.body.exceededDailyQuotaDevices),u=e.body.throttledEvents,c=new Set(r),f=new Set(s),p=new Set(u),l=t.filter(function(a,m){if(a.event.user_id&&c.has(a.event.user_id)||a.event.device_id&&f.has(a.event.device_id)){i.fulfillRequest([a],e.statusCode,e.body.error);return}return p.has(m)&&(a.timeout=i.throttleTimeout),!0});l.length>0&&this.config.loggerProvider.warn(Ie(e)),this.addToQueue.apply(this,(0,o.ev)([],(0,o.CR)(l),!1))},n.prototype.handleOtherResponse=function(e){var t=this;this.addToQueue.apply(this,(0,o.ev)([],(0,o.CR)(e.map(function(i){return i.timeout=i.attempts*t.retryTimeout,i})),!1))},n.prototype.fulfillRequest=function(e,t,i){this.saveEvents(),e.forEach(function(r){return r.callback(Q(r.event,t,i))})},n.prototype.saveEvents=function(){if(this.config.storageProvider){var e=Array.from(this.queue.map(function(t){return t.event}));this.config.storageProvider.set(this.storageKey,e)}},n}(),fe=function(n){return n?(n^16*Math.random()>>n/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,fe)};(L=x||(x={})).SET="$set",L.SET_ONCE="$setOnce",L.ADD="$add",L.APPEND="$append",L.PREPEND="$prepend",L.REMOVE="$remove",L.PREINSERT="$preInsert",L.POSTINSERT="$postInsert",L.UNSET="$unset",L.CLEAR_ALL="$clearAll",(H=g||(g={})).REVENUE_PRODUCT_ID="$productId",H.REVENUE_QUANTITY="$quantity",H.REVENUE_PRICE="$price",H.REVENUE_TYPE="$revenueType",H.REVENUE="$revenue",(de=b||(b={})).IDENTIFY="$identify",de.GROUP_IDENTIFY="$groupidentify",de.REVENUE="revenue_amount";var Oe=function(n){if(Object.keys(n).length>1e3)return!1;for(var e in n){var t=n[e];if(!ct(e,t))return!1}return!0},ct=function(n,e){var t,i;if(typeof n!="string")return!1;if(Array.isArray(e)){var r=!0;try{for(var s=(0,o.XA)(e),u=s.next();!u.done;u=s.next()){var c=u.value;if(Array.isArray(c))return!1;if(typeof c=="object")r=r&&Oe(c);else if(!["number","string"].includes(typeof c))return!1;if(!r)return!1}}catch(f){t={error:f}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}}else{if(e==null)return!1;if(typeof e=="object")return Oe(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0},we=function(){function n(){this._propertySet=new Set,this._properties={}}return n.prototype.getUserProperties=function(){return(0,o.pi)({},this._properties)},n.prototype.set=function(e,t){return this._safeSet(x.SET,e,t),this},n.prototype.setOnce=function(e,t){return this._safeSet(x.SET_ONCE,e,t),this},n.prototype.append=function(e,t){return this._safeSet(x.APPEND,e,t),this},n.prototype.prepend=function(e,t){return this._safeSet(x.PREPEND,e,t),this},n.prototype.postInsert=function(e,t){return this._safeSet(x.POSTINSERT,e,t),this},n.prototype.preInsert=function(e,t){return this._safeSet(x.PREINSERT,e,t),this},n.prototype.remove=function(e,t){return this._safeSet(x.REMOVE,e,t),this},n.prototype.add=function(e,t){return this._safeSet(x.ADD,e,t),this},n.prototype.unset=function(e){return this._safeSet(x.UNSET,e,"-"),this},n.prototype.clearAll=function(){return this._properties={},this._properties[x.CLEAR_ALL]="-",this},n.prototype._safeSet=function(e,t,i){if(this._validate(e,t,i)){var r=this._properties[e];return r===void 0&&(r={},this._properties[e]=r),r[t]=i,this._propertySet.add(t),!0}return!1},n.prototype._validate=function(e,t,i){return!(this._properties[x.CLEAR_ALL]!==void 0||this._propertySet.has(t))&&(e===x.ADD?typeof i=="number":e===x.UNSET||e===x.REMOVE||ct(t,i))},n}(),Mt=function(){function n(){this.productId="",this.quantity=1,this.price=0}return n.prototype.setProductId=function(e){return this.productId=e,this},n.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},n.prototype.setPrice=function(e){return this.price=e,this},n.prototype.setRevenueType=function(e){return this.revenueType=e,this},n.prototype.setRevenue=function(e){return this.revenue=e,this},n.prototype.setEventProperties=function(e){return Oe(e)&&(this.properties=e),this},n.prototype.getEventProperties=function(){var e=this.properties?(0,o.pi)({},this.properties):{};return e[g.REVENUE_PRODUCT_ID]=this.productId,e[g.REVENUE_QUANTITY]=this.quantity,e[g.REVENUE_PRICE]=this.price,e[g.REVENUE_TYPE]=this.revenueType,e[g.REVENUE]=this.revenue,e},n}(),Vt=function(){function n(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return n.prototype.register=function(e,t){var i,r,s;return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(u){switch(u.label){case 0:return e.name=(i=e.name)!==null&&i!==void 0?i:fe(),e.type=(r=e.type)!==null&&r!==void 0?r:"enrichment",[4,(s=e.setup)===null||s===void 0?void 0:s.call(e,t,this.client)];case 1:return u.sent(),this.plugins.push(e),[2]}})})},n.prototype.deregister=function(e){var t;return(0,o.mG)(this,void 0,void 0,function(){var i,r;return(0,o.Jh)(this,function(s){switch(s.label){case 0:return i=this.plugins.findIndex(function(u){return u.name===e}),r=this.plugins[i],this.plugins.splice(i,1),[4,(t=r.teardown)===null||t===void 0?void 0:t.call(r)];case 1:return s.sent(),[2]}})})},n.prototype.reset=function(e){this.applying=!1,this.plugins.map(function(t){var i;return(i=t.teardown)===null||i===void 0?void 0:i.call(t)}),this.plugins=[],this.client=e},n.prototype.push=function(e){var t=this;return new Promise(function(i){t.queue.push([e,i]),t.scheduleApply(0)})},n.prototype.scheduleApply=function(e){var t=this;this.applying||(this.applying=!0,setTimeout(function(){t.apply(t.queue.shift()).then(function(){t.applying=!1,t.queue.length>0&&t.scheduleApply(0)})},e))},n.prototype.apply=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,i,r,s,u,c,f,p,l,a,m,_,T,N;return(0,o.Jh)(this,function(E){switch(E.label){case 0:if(!e)return[2];t=(0,o.CR)(e,1)[0],i=(0,o.CR)(e,2)[1],r=this.plugins.filter(function(O){return O.type==="before"}),E.label=1;case 1:E.trys.push([1,6,7,8]),u=(s=(0,o.XA)(r)).next(),E.label=2;case 2:return u.done?[3,5]:(c=u.value).execute?[4,c.execute((0,o.pi)({},t))]:[3,4];case 3:if((f=E.sent())===null)return i({event:t,code:0,message:""}),[2];t=f,E.label=4;case 4:return u=s.next(),[3,2];case 5:return[3,8];case 6:return m={error:E.sent()},[3,8];case 7:try{u&&!u.done&&(_=s.return)&&_.call(s)}finally{if(m)throw m.error}return[7];case 8:p=this.plugins.filter(function(O){return O.type==="enrichment"||O.type===void 0}),E.label=9;case 9:E.trys.push([9,14,15,16]),a=(l=(0,o.XA)(p)).next(),E.label=10;case 10:return a.done?[3,13]:(c=a.value).execute?[4,c.execute((0,o.pi)({},t))]:[3,12];case 11:if((f=E.sent())===null)return i({event:t,code:0,message:""}),[2];t=f,E.label=12;case 12:return a=l.next(),[3,10];case 13:return[3,16];case 14:return T={error:E.sent()},[3,16];case 15:try{a&&!a.done&&(N=l.return)&&N.call(l)}finally{if(T)throw T.error}return[7];case 16:return Promise.all(this.plugins.filter(function(O){return O.type==="destination"}).map(function(O){var D=(0,o.pi)({},t);return O.execute(D).catch(function(P){return Q(D,0,String(P))})})).then(function(O){i((0,o.CR)(O,1)[0]||Q(t,100,"Event not tracked, no destination plugins on the instance"))}),[2]}})})},n.prototype.flush=function(){return(0,o.mG)(this,void 0,void 0,function(){var e,t=this;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(r){return t.apply(r)}))];case 1:return i.sent(),[4,Promise.all(this.plugins.filter(function(r){return r.type==="destination"}).map(function(r){return r.flush&&r.flush()}))];case 2:return i.sent(),[2]}})})},n}(),Ft=function(n,e,t){var i=typeof n=="string"?{event_type:n}:n;return(0,o.pi)((0,o.pi)((0,o.pi)({},i),t),e&&{event_properties:e})},lt=function(n,e){return(0,o.pi)((0,o.pi)({},e),{event_type:b.IDENTIFY,user_properties:n.getUserProperties()})},$t=function(n,e,t,i){var r;return(0,o.pi)((0,o.pi)({},i),{event_type:b.GROUP_IDENTIFY,group_properties:t.getUserProperties(),groups:((r={})[n]=e,r)})},Kt=function(n,e,t){var i,r=new we;return r.set(n,e),(0,o.pi)((0,o.pi)({},t),{event_type:b.IDENTIFY,user_properties:r.getUserProperties(),groups:((i={})[n]=e,i)})},Qt=function(){function n(e){e===void 0&&(e="$default"),this.initializing=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new Vt(this),this.name=e}return n.prototype._init=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return this.config=e,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return t.sent(),[2]}})})},n.prototype.runQueuedFunctions=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,i,r,s,u;return(0,o.Jh)(this,function(c){switch(c.label){case 0:t=this[e],this[e]=[],c.label=1;case 1:c.trys.push([1,6,7,8]),r=(i=(0,o.XA)(t)).next(),c.label=2;case 2:return r.done?[3,5]:[4,(0,r.value)()];case 3:c.sent(),c.label=4;case 4:return r=i.next(),[3,2];case 5:return[3,8];case 6:return s={error:c.sent()},[3,8];case 7:try{r&&!r.done&&(u=i.return)&&u.call(i)}finally{if(s)throw s.error}return[7];case 8:return[2]}})})},n.prototype.track=function(e,t,i){var r=Ft(e,t,i);return U(this.dispatch(r))},n.prototype.identify=function(e,t){var i=lt(e,t);return U(this.dispatch(i))},n.prototype.groupIdentify=function(e,t,i,r){var s=$t(e,t,i,r);return U(this.dispatch(s))},n.prototype.setGroup=function(e,t,i){var r=Kt(e,t,i);return U(this.dispatch(r))},n.prototype.revenue=function(e,t){var i=(0,o.pi)((0,o.pi)({},t),{event_type:b.REVENUE,event_properties:e.getEventProperties()});return U(this.dispatch(i))},n.prototype.add=function(e){return this.config?U(this.timeline.register(e,this.config)):(this.q.push(this.add.bind(this,e)),U())},n.prototype.remove=function(e){return this.config?U(this.timeline.deregister(e)):(this.q.push(this.remove.bind(this,e)),U())},n.prototype.dispatchWithCallback=function(e,t){if(!this.config)return t(Q(e,0,"Client not initialized"));this.process(e).then(t)},n.prototype.dispatch=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t=this;return(0,o.Jh)(this,function(i){return this.config?[2,this.process(e)]:[2,new Promise(function(r){t.dispatchQ.push(t.dispatchWithCallback.bind(t,e,r))})]})})},n.prototype.process=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,i;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.config.optOut?[2,Q(e,0,"Event skipped due to optOut config")]:[4,this.timeline.push(e)];case 1:return(t=r.sent()).code===200?this.config.loggerProvider.log(t.message):t.code===100?this.config.loggerProvider.warn(t.message):this.config.loggerProvider.error(t.message),[2,t];case 2:return i=String(r.sent()),this.config.loggerProvider.error(i),[2,t=Q(e,0,i)];case 3:return[2]}})})},n.prototype.setOptOut=function(e){if(!this.config){this.q.push(this.setOptOut.bind(this,!!e));return}this.config.optOut=!!e},n.prototype.flush=function(){return U(this.timeline.flush())},n}(),Zt=function(){function n(){}return n.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:Bt(),platform:"Web",os:void 0,deviceModel:void 0}},n}(),Bt=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},zt=function(){function n(){this.queue=[]}return n.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},n.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(t){e(t)}),this.queue=[])},n}(),te=function(){return(te=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}).apply(this,arguments)},Se=function(n,e){var t=typeof n;if(t!==typeof e)return!1;for(var i=0,r=["string","number","boolean","undefined"];i<r.length;i++)if(r[i]===t)return n===e;if(n==null&&e==null)return!0;if(n==null||e==null||n.length!==e.length)return!1;var s=Array.isArray(n),u=Array.isArray(e);if(s!==u)return!1;if(s&&u){for(var c=0;c<n.length;c++)if(!Se(n[c],e[c]))return!1}else{if(!Se(Object.keys(n).sort(),Object.keys(e).sort()))return!1;var f=!0;return Object.keys(n).forEach(function(p){Se(n[p],e[p])||(f=!1)}),f}return!0};Object.entries||(Object.entries=function(n){for(var e=Object.keys(n),t=e.length,i=Array(t);t--;)i[t]=[e[t],n[e[t]]];return i});var Wt=function(){function n(){this.identity={userProperties:{}},this.listeners=new Set}return n.prototype.editIdentity=function(){var e=this,t=te({},this.identity.userProperties),i=te(te({},this.identity),{userProperties:t});return{setUserId:function(r){return i.userId=r,this},setDeviceId:function(r){return i.deviceId=r,this},setUserProperties:function(r){return i.userProperties=r,this},setOptOut:function(r){return i.optOut=r,this},updateUserProperties:function(r){for(var s=i.userProperties||{},u=0,c=Object.entries(r);u<c.length;u++){var f=c[u],p=f[0],l=f[1];switch(p){case"$set":for(var a=0,m=Object.entries(l);a<m.length;a++){var _=m[a],T=_[0],N=_[1];s[T]=N}break;case"$unset":for(var E=0,O=Object.keys(l);E<O.length;E++){var T=O[E];delete s[T]}break;case"$clearAll":s={}}}return i.userProperties=s,this},commit:function(){return e.setIdentity(i),this}}},n.prototype.getIdentity=function(){return te({},this.identity)},n.prototype.setIdentity=function(e){var t=te({},this.identity);this.identity=te({},e),Se(t,this.identity)||this.listeners.forEach(function(i){i(e)})},n.prototype.addIdentityListener=function(e){this.listeners.add(e)},n.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},n}(),pe=typeof globalThis<"u"?globalThis:Y.g!==void 0?Y.g:self,Yt=function(){function n(){this.identityStore=new Wt,this.eventBridge=new zt,this.applicationContextProvider=new Zt}return n.getInstance=function(e){return pe.analyticsConnectorInstances||(pe.analyticsConnectorInstances={}),pe.analyticsConnectorInstances[e]||(pe.analyticsConnectorInstances[e]=new n),pe.analyticsConnectorInstances[e]},n}(),he=function(n){return n===void 0&&(n="$default_instance"),Yt.getInstance(n)},Xt=function(n,e){he(e).identityStore.editIdentity().setUserId(n).commit()},Ht=function(n,e){he(e).identityStore.editIdentity().setDeviceId(n).commit()},en=function(){function n(){this.name="identity",this.type="before",this.identityStore=he().identityStore}return n.prototype.execute=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(i){return(t=e.user_properties)&&this.identityStore.editIdentity().updateUserProperties(t).commit(),[2,e]})})},n.prototype.setup=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){return e.instanceName&&(this.identityStore=he(e.instanceName).identityStore),[2]})})},n}(),ve=function(n,e){return typeof n=="boolean"?n:n?.[e]!==!1},dt=function(n){return ve(n,"attribution")},ft=function(n){return ve(n,"pageViews")},tn=function(n){var e,t=function(){return!1},i=void 0;return ft(n.defaultTracking)&&(t=void 0,e=void 0,n.defaultTracking&&typeof n.defaultTracking=="object"&&n.defaultTracking.pageViews&&typeof n.defaultTracking.pageViews=="object"&&("trackOn"in n.defaultTracking.pageViews&&(t=n.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in n.defaultTracking.pageViews&&(i=n.defaultTracking.pageViews.trackHistoryChanges),"eventType"in n.defaultTracking.pageViews&&n.defaultTracking.pageViews.eventType&&(e=n.defaultTracking.pageViews.eventType))),{trackOn:t,trackHistoryChanges:i,eventType:e}},pt=function(n,e){return e===void 0&&(e=Date.now()),Date.now()-e>n},Pe=function(n,e){for(var t=0;t<e.length;t++){var i=e[t],r=i.name,s=i.args,u=i.resolve,c=n&&n[r];if(typeof c=="function"){var f=c.apply(n,s);typeof u=="function"&&u(f?.promise)}}return n},Re=function(n){return n&&n._q!==void 0},nn=function(){if(typeof navigator>"u")return"";var n,e,t,i,r=navigator.userLanguage;return(i=(t=(e=(n=navigator.languages)===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:navigator.language)!==null&&t!==void 0?t:r)!==null&&i!==void 0?i:""},rn=function(){function n(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="amplitude-ts/".concat("2.4.1"),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return n.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},n.prototype.execute=function(e){var t,i;return(0,o.mG)(this,void 0,void 0,function(){var r,s,u;return(0,o.Jh)(this,function(c){return r=new Date().getTime(),s=(t=this.config.lastEventId)!==null&&t!==void 0?t:-1,u=(i=e.event_id)!==null&&i!==void 0?i:s+1,this.config.lastEventId=u,e.time||(this.config.lastEventTime=r),[2,(0,o.pi)((0,o.pi)((0,o.pi)((0,o.pi)((0,o.pi)((0,o.pi)((0,o.pi)((0,o.pi)({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:r},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:"Web"}),this.config.trackingOptions.language&&{language:nn()}),this.config.trackingOptions.ipAddress&&{ip:"$remote"}),{insert_id:fe(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:u,library:this.library,user_agent:this.userAgent})]})})},n}(),ht=function(){function n(){this.memoryStorage=new Map}return n.prototype.isEnabled=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2,!0]})})},n.prototype.get=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){return[2,this.memoryStorage.get(e)]})})},n.prototype.getRaw=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return[4,this.get(e)];case 1:return[2,(t=i.sent())?JSON.stringify(t):void 0]}})})},n.prototype.set=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(i){return this.memoryStorage.set(e,t),[2]})})},n.prototype.remove=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){return this.memoryStorage.delete(e),[2]})})},n.prototype.reset=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return this.memoryStorage.clear(),[2]})})},n}(),vt=function(n,e,t){return e===void 0&&(e=""),t===void 0&&(t=10),["AMP",e,n.substring(0,t)].filter(Boolean).join("_")},z=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:Y.g!==void 0?Y.g:void 0},xe=function(){var n,e=z();return!((n=e?.location)===null||n===void 0)&&n.search?e.location.search.substring(1).split("&").filter(Boolean).reduce(function(t,i){var r=i.split("=",2),s=gt(r[0]),u=gt(r[1]);return u&&(t[s]=u),t},{}):{}},gt=function(n){n===void 0&&(n="");try{return decodeURIComponent(n)}catch{return""}},Ae=function(){function n(e){this.options=(0,o.pi)({},e)}return n.prototype.isEnabled=function(){return(0,o.mG)(this,void 0,void 0,function(){var e,t;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(!z())return[2,!1];n.testValue=String(Date.now()),e=new n(this.options),t="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,e.set(t,n.testValue)];case 2:return i.sent(),[4,e.get(t)];case 3:return[2,i.sent()===n.testValue];case 4:return i.sent(),[2,!1];case 5:return[4,e.remove(t)];case 6:return i.sent(),[7];case 7:return[2]}})})},n.prototype.get=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return[4,this.getRaw(e)];case 1:if(!(t=i.sent()))return[2,void 0];try{try{t=decodeURIComponent(atob(t))}catch{}return[2,JSON.parse(t)]}catch{return[2,void 0]}return[2]}})})},n.prototype.getRaw=function(e){var t,i;return(0,o.mG)(this,void 0,void 0,function(){var r,s;return(0,o.Jh)(this,function(u){return(s=((i=(t=(r=z())==null?void 0:r.document)===null||t===void 0?void 0:t.cookie.split("; "))!==null&&i!==void 0?i:[]).find(function(c){return c.indexOf(e+"=")===0}))?[2,s.substring(e.length+1)]:[2,void 0]})})},n.prototype.set=function(e,t){var i;return(0,o.mG)(this,void 0,void 0,function(){var r,s,u,c,f,p;return(0,o.Jh)(this,function(l){try{r=(i=this.options.expirationDays)!==null&&i!==void 0?i:0,s=t!==null?r:-1,u=void 0,s&&((c=new Date).setTime(c.getTime()+864e5*s),u=c),f="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(t)))),u&&(f+="; expires=".concat(u.toUTCString())),f+="; path=/",this.options.domain&&(f+="; domain=".concat(this.options.domain)),this.options.secure&&(f+="; Secure"),this.options.sameSite&&(f+="; SameSite=".concat(this.options.sameSite)),(p=z())&&(p.document.cookie=f)}catch{}return[2]})})},n.prototype.remove=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,this.set(e,null)];case 1:return t.sent(),[2]}})})},n.prototype.reset=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2]})})},n}(),Ne=function(){function n(){}return n.prototype.send=function(e,t){return Promise.resolve(null)},n.prototype.buildResponse=function(e){if(typeof e!="object")return null;var t,i,r,s,u,c,f,p,l,a,m,_,T,N,E,O,D,P,k,Z,X,B,C=e.code||0,F=this.buildStatus(C);switch(F){case R.Success:return{status:F,statusCode:C,body:{eventsIngested:(t=e.events_ingested)!==null&&t!==void 0?t:0,payloadSizeBytes:(i=e.payload_size_bytes)!==null&&i!==void 0?i:0,serverUploadTime:(r=e.server_upload_time)!==null&&r!==void 0?r:0}};case R.Invalid:return{status:F,statusCode:C,body:{error:(s=e.error)!==null&&s!==void 0?s:"",missingField:(u=e.missing_field)!==null&&u!==void 0?u:"",eventsWithInvalidFields:(c=e.events_with_invalid_fields)!==null&&c!==void 0?c:{},eventsWithMissingFields:(f=e.events_with_missing_fields)!==null&&f!==void 0?f:{},eventsWithInvalidIdLengths:(p=e.events_with_invalid_id_lengths)!==null&&p!==void 0?p:{},epsThreshold:(l=e.eps_threshold)!==null&&l!==void 0?l:0,exceededDailyQuotaDevices:(a=e.exceeded_daily_quota_devices)!==null&&a!==void 0?a:{},silencedDevices:(m=e.silenced_devices)!==null&&m!==void 0?m:[],silencedEvents:(_=e.silenced_events)!==null&&_!==void 0?_:[],throttledDevices:(T=e.throttled_devices)!==null&&T!==void 0?T:{},throttledEvents:(N=e.throttled_events)!==null&&N!==void 0?N:[]}};case R.PayloadTooLarge:return{status:F,statusCode:C,body:{error:(E=e.error)!==null&&E!==void 0?E:""}};case R.RateLimit:return{status:F,statusCode:C,body:{error:(O=e.error)!==null&&O!==void 0?O:"",epsThreshold:(D=e.eps_threshold)!==null&&D!==void 0?D:0,throttledDevices:(P=e.throttled_devices)!==null&&P!==void 0?P:{},throttledUsers:(k=e.throttled_users)!==null&&k!==void 0?k:{},exceededDailyQuotaDevices:(Z=e.exceeded_daily_quota_devices)!==null&&Z!==void 0?Z:{},exceededDailyQuotaUsers:(X=e.exceeded_daily_quota_users)!==null&&X!==void 0?X:{},throttledEvents:(B=e.throttled_events)!==null&&B!==void 0?B:[]}};case R.Timeout:default:return{status:F,statusCode:C}}},n.prototype.buildStatus=function(e){return e>=200&&e<300?R.Success:e===429?R.RateLimit:e===413?R.PayloadTooLarge:e===408?R.Timeout:e>=400&&e<500?R.Invalid:e>=500?R.Failed:R.Unknown},n}(),on=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return(0,o.ZT)(e,n),e.prototype.send=function(t,i){return(0,o.mG)(this,void 0,void 0,function(){var r,s;return(0,o.Jh)(this,function(u){switch(u.label){case 0:if(typeof fetch>"u")throw Error("FetchTransport is not supported");return r={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(i),method:"POST"},[4,fetch(t,r)];case 1:return[4,u.sent().json()];case 2:return s=u.sent(),[2,this.buildResponse(s)]}})})},e}(Ne),yt=function(){function n(e){this.storage=e}return n.prototype.isEnabled=function(){return(0,o.mG)(this,void 0,void 0,function(){var e,t,i;return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),t=new n(this.storage),i="AMP_TEST",r.label=1;case 1:return r.trys.push([1,4,5,7]),[4,t.set(i,e)];case 2:return r.sent(),[4,t.get(i)];case 3:return[2,r.sent()===e];case 4:return r.sent(),[2,!1];case 5:return[4,t.remove(i)];case 6:return r.sent(),[7];case 7:return[2]}})})},n.prototype.get=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return(t=i.sent())?[2,JSON.parse(t)]:[2,void 0];case 2:return i.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},n.prototype.getRaw=function(e){var t;return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(i){return[2,((t=this.storage)===null||t===void 0?void 0:t.getItem(e))||void 0]})})},n.prototype.set=function(e,t){var i;return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){try{(i=this.storage)===null||i===void 0||i.setItem(e,JSON.stringify(t))}catch{}return[2]})})},n.prototype.remove=function(e){var t;return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(i){try{(t=this.storage)===null||t===void 0||t.removeItem(e)}catch{}return[2]})})},n.prototype.reset=function(){var e;return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},n}(),mt=function(n){function e(t){var i,r=this;return(r=n.call(this,(i=z())===null||i===void 0?void 0:i.localStorage)||this).loggerProvider=t?.loggerProvider,r}return(0,o.ZT)(e,n),e.prototype.set=function(t,i){var r;return(0,o.mG)(this,void 0,void 0,function(){var s;return(0,o.Jh)(this,function(u){switch(u.label){case 0:return Array.isArray(i)&&i.length>1e3?(s=i.length-1e3,[4,n.prototype.set.call(this,t,i.slice(0,1e3))]):[3,2];case 1:return u.sent(),(r=this.loggerProvider)===null||r===void 0||r.error("Failed to save ".concat(s," events because the queue length exceeded ").concat(1e3,".")),[3,4];case 2:return[4,n.prototype.set.call(this,t,i)];case 3:u.sent(),u.label=4;case 4:return[2]}})})},e}(yt),sn=function(n){function e(){var t;return n.call(this,(t=z())===null||t===void 0?void 0:t.sessionStorage)||this}return(0,o.ZT)(e,n),e}(yt),un=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.state={done:4},t}return(0,o.ZT)(e,n),e.prototype.send=function(t,i){return(0,o.mG)(this,void 0,void 0,function(){var r=this;return(0,o.Jh)(this,function(s){return[2,new Promise(function(u,c){typeof XMLHttpRequest>"u"&&c(Error("XHRTransport is not supported."));var f=new XMLHttpRequest;f.open("POST",t,!0),f.onreadystatechange=function(){if(f.readyState===r.state.done)try{var p=f.responseText,l=JSON.parse(p),a=r.buildResponse(l);u(a)}catch(m){c(m)}},f.setRequestHeader("Content-Type","application/json"),f.setRequestHeader("Accept","*/*"),f.send(JSON.stringify(i))})]})})},e}(Ne),an=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return(0,o.ZT)(e,n),e.prototype.send=function(t,i){return(0,o.mG)(this,void 0,void 0,function(){var r=this;return(0,o.Jh)(this,function(s){return[2,new Promise(function(u,c){var f=z();if(!f?.navigator.sendBeacon)throw Error("SendBeaconTransport is not supported");try{var p=JSON.stringify(i);return f.navigator.sendBeacon(t,JSON.stringify(i))?u(r.buildResponse({code:200,events_ingested:i.events.length,payload_size_bytes:p.length,server_upload_time:Date.now()})):u(r.buildResponse({code:500}))}catch(l){c(l)}})]})})},e}(Ne),Ue=function(n){var e=parseInt(n,32);if(!isNaN(e))return e},cn=function(n){if(atob&&escape&&n)try{return decodeURIComponent(escape(atob(n)))}catch{return}},V="[Amplitude]",bt="".concat(V," Form Started"),ln="".concat(V," Form Submitted"),dn="".concat(V," File Downloaded"),_t="session_start",It="session_end",fn="".concat(V," File Extension"),pn="".concat(V," File Name"),hn="".concat(V," Link ID"),vn="".concat(V," Link Text"),gn="".concat(V," Link URL"),De="".concat(V," Form ID"),qe="".concat(V," Form Name"),Je="".concat(V," Form Destination"),Ee="cookie",yn=function(n){function e(t,i,r,s,u,c,f,p,l,a,m,_,T,N,E,O,D,P,k,Z,X,B,C,F,ue,ne,ae,j,ie,ge){r===void 0&&(r=new ht),s===void 0&&(s={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),f===void 0&&(f=1e3),p===void 0&&(p=5),l===void 0&&(l=30),a===void 0&&(a=Ee),E===void 0&&(E=new ut),O===void 0&&(O=q.Warn),P===void 0&&(P=!1),k===void 0&&(k=!1),B===void 0&&(B=""),C===void 0&&(C="US"),ue===void 0&&(ue=18e5),ne===void 0&&(ne=new mt({loggerProvider:E})),ae===void 0&&(ae={ipAddress:!0,language:!0,platform:!0}),j===void 0&&(j="fetch"),ie===void 0&&(ie=!1);var I=n.call(this,{apiKey:t,storageProvider:ne,transportProvider:wt(j)})||this;return I.apiKey=t,I.appVersion=i,I.cookieOptions=s,I.defaultTracking=u,I.flushIntervalMillis=f,I.flushMaxRetries=p,I.flushQueueSize=l,I.identityStorage=a,I.ingestionMetadata=m,I.instanceName=_,I.loggerProvider=E,I.logLevel=O,I.minIdLength=D,I.offline=P,I.partnerId=Z,I.plan=X,I.serverUrl=B,I.serverZone=C,I.sessionTimeout=ue,I.storageProvider=ne,I.trackingOptions=ae,I.transport=j,I.useBatch=ie,I._optOut=!1,I._cookieStorage=r,I.deviceId=c,I.lastEventId=T,I.lastEventTime=N,I.optOut=k,I.sessionId=F,I.userId=ge,I.loggerProvider.enable(I.logLevel),I}return(0,o.ZT)(e,n),Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(t){this._cookieStorage!==t&&(this._cookieStorage=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(t){this._deviceId!==t&&(this._deviceId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(t){this._userId!==t&&(this._userId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(t){this._sessionId!==t&&(this._sessionId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(t){this._optOut!==t&&(this._optOut=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(t){this._lastEventTime!==t&&(this._lastEventTime=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(t){this._lastEventId!==t&&(this._lastEventId=t,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var t={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId};this.cookieStorage.set(vt(this.apiKey),t)},e}(Gt),mn=function(n,e){switch(n===void 0&&(n=Ee),e===void 0&&(e={}),n){case"localStorage":return new mt;case"sessionStorage":return new sn;case"none":return new ht;default:return new Ae((0,o.pi)((0,o.pi)({},e),{expirationDays:e.expiration}))}},wt=function(n){return n==="xhr"?new un:n==="beacon"?new an:new on},St="dclid",Et="fbclid",Tt="gbraid",kt="gclid",Ot="ko_click_id",Pt="li_fat_id",Rt="msclkid",xt="rtd_cid",At="ttclid",Nt="twclid",Ut="wbraid",Le={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},Dt=function(){function n(){}return n.prototype.parse=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2,(0,o.pi)((0,o.pi)((0,o.pi)((0,o.pi)({},Le),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},n.prototype.getUtmParam=function(){var e=xe();return{utm_campaign:e.utm_campaign,utm_content:e.utm_content,utm_id:e.utm_id,utm_medium:e.utm_medium,utm_source:e.utm_source,utm_term:e.utm_term}},n.prototype.getReferrer=function(){var e,t,i={referrer:void 0,referring_domain:void 0};try{i.referrer=document.referrer||void 0,i.referring_domain=(t=(e=i.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&t!==void 0?t:void 0}catch{}return i},n.prototype.getClickIds=function(){var e,t=xe();return(e={})[St]=t[St],e[Et]=t[Et],e[Tt]=t[Tt],e[kt]=t[kt],e[Ot]=t[Ot],e[Pt]=t[Pt],e[Rt]=t[Rt],e[xt]=t[xt],e[At]=t[At],e[Nt]=t[Nt],e[Ut]=t[Ut],e},n}(),qt=function(n){var e=n.split(".");return e.length<=2?n:e.slice(e.length-2,e.length).join(".")},bn=function(n,e,t,i){i===void 0&&(i=!0),n.referrer;var r=n.referring_domain,s=(0,o._T)(n,["referrer","referring_domain"]),u=e||{},c=(u.referrer,u.referring_domain),f=(0,o._T)(u,["referrer","referring_domain"]);if(_n(t.excludeReferrers,n.referring_domain)||!i&&Object.values(n).every(function(a){return!a})&&e)return!1;var p=JSON.stringify(s)!==JSON.stringify(f),l=qt(r||"")!==qt(c||"");return!e||p||l},_n=function(n,e){return n===void 0&&(n=[]),e===void 0&&(e=""),n.some(function(t){return t instanceof RegExp?t.test(e):t===e})},In=function(n){var e=n;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]},wn=function(n){var e=this;return n===void 0&&(n={}),{name:"@amplitude/plugin-web-attribution-browser",type:"before",setup:function(t,i){var r;return(0,o.mG)(this,void 0,void 0,function(){var s,u,c,f,p,l;return(0,o.Jh)(this,function(a){var m,_,T;switch(a.label){case 0:return s=(0,o.pi)({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:In((r=t.cookieOptions)===null||r===void 0?void 0:r.domain)},n),t.loggerProvider.log("Installing @amplitude/plugin-web-attribution-browser."),u=t.cookieStorage,m=t.apiKey,_===void 0&&(_=10),c=["AMP","MKTG",m.substring(0,_)].filter(Boolean).join("_"),[4,Promise.all([new Dt().parse(),u.get(c)])];case 1:return bn(p=(f=o.CR.apply(void 0,[a.sent(),2]))[0],f[1],s,pt(t.sessionTimeout,t.lastEventTime))&&(s.resetSessionOnNewCampaign&&(i.setSessionId(Date.now()),t.loggerProvider.log("Created a new session for new campaign.")),t.loggerProvider.log("Tracking attribution."),T=s,l=lt(Object.entries((0,o.pi)((0,o.pi)({},Le),p)).reduce(function(N,E){var O,D=(0,o.CR)(E,2),P=D[0],k=D[1];return N.setOnce("initial_".concat(P),(O=k??T.initialEmptyValue)!==null&&O!==void 0?O:"EMPTY"),k?N.set(P,k):N.unset(P)},new we)),i.track(l),u.set(c,p)),[2]}})})},execute:function(t){return(0,o.mG)(e,void 0,void 0,function(){return(0,o.Jh)(this,function(i){return[2,t]})})}}},Sn=function(n){var e={};for(var t in n){var i=n[t];i&&(e[t]=i)}return e},En=function(n){n===void 0&&(n={});var e,t,i=z(),r=void 0,s=function(){return(0,o.mG)(void 0,void 0,void 0,function(){var l,a,m;return(0,o.Jh)(this,function(_){switch(_.label){case 0:return a={event_type:(m=n.eventType)!==null&&m!==void 0?m:"[Amplitude] Page Viewed"},l=[{}],[4,Tn()];case 1:return[2,(a.event_properties=o.pi.apply(void 0,[o.pi.apply(void 0,l.concat([_.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":typeof location<"u"&&location.href||"","[Amplitude] Page Path":typeof location<"u"&&location.pathname||"","[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":typeof location<"u"&&location.href.split("?")[0]||""}]),a)]}})})},u=function(){return n.trackOn===void 0||typeof n.trackOn=="function"&&n.trackOn()},c=typeof location<"u"?location.href:null,f=function(){return(0,o.mG)(void 0,void 0,void 0,function(){var l,a,m,_;return(0,o.Jh)(this,function(T){switch(T.label){case 0:return l=location.href,a=On(n.trackHistoryChanges,l,c||"")&&u(),c=l,a?(r?.log("Tracking page view event"),e!=null?[3,1]:[3,3]):[3,4];case 1:return _=(m=e).track,[4,s()];case 2:_.apply(m,[T.sent()]),T.label=3;case 3:T.label=4;case 4:return[2]}})})},p=function(){f()};return{name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(l,a){return(0,o.mG)(void 0,void 0,void 0,function(){var m,_;return(0,o.Jh)(this,function(T){switch(T.label){case 0:return e=a,(r=l.loggerProvider).log("Installing @amplitude/plugin-page-view-tracking-browser"),i&&(i.addEventListener("popstate",p),t=i.history.pushState,i.history.pushState=new Proxy(i.history.pushState,{apply:function(N,E,O){var D=(0,o.CR)(O,3),P=D[0],k=D[1],Z=D[2];N.apply(E,[P,k,Z]),f()}})),u()?(r.log("Tracking page view event"),_=(m=e).track,[4,s()]):[3,2];case 1:_.apply(m,[T.sent()]),T.label=2;case 2:return[2]}})})},execute:function(l){return(0,o.mG)(void 0,void 0,void 0,function(){var a;return(0,o.Jh)(this,function(m){switch(m.label){case 0:return n.trackOn==="attribution"&&kn(l)?(r?.log("Enriching campaign event to page view event with campaign parameters"),[4,s()]):[3,2];case 1:a=m.sent(),l.event_type=a.event_type,l.event_properties=(0,o.pi)((0,o.pi)({},l.event_properties),a.event_properties),m.label=2;case 2:return[2,l]}})})},teardown:function(){return(0,o.mG)(void 0,void 0,void 0,function(){return(0,o.Jh)(this,function(l){return i&&(i.removeEventListener("popstate",p),t&&(i.history.pushState=t)),[2]})})}}},Tn=function(){return(0,o.mG)(void 0,void 0,void 0,function(){var n;return(0,o.Jh)(this,function(e){switch(e.label){case 0:return n=Sn,[4,new Dt().parse()];case 1:return[2,n.apply(void 0,[e.sent()])]}})})},kn=function(n){if(n.event_type==="$identify"&&n.user_properties){var e=n.user_properties,t=e[x.SET]||{},i=e[x.UNSET]||{},r=(0,o.ev)((0,o.ev)([],(0,o.CR)(Object.keys(t)),!1),(0,o.CR)(Object.keys(i)),!1);return Object.keys(Le).every(function(s){return r.includes(s)})}return!1},On=function(n,e,t){return n==="pathOnly"?e.split("?")[0]!==t.split("?")[0]:e!==t},Pn=function(){var n,e=[],t=function(r,s,u){r.addEventListener(s,u),e.push({element:r,type:s,handler:u})},i=function(){e.forEach(function(r){var s=r.element,u=r.type,c=r.handler;s?.removeEventListener(u,c)}),e=[]};return{name:"@amplitude/plugin-form-interaction-tracking-browser",type:"enrichment",setup:function(r,s){return(0,o.mG)(void 0,void 0,void 0,function(){var u;return(0,o.Jh)(this,function(c){return s?typeof document>"u"||(u=function(f){var p=!1;t(f,"change",function(){var l;p||s.track(bt,((l={})[De]=se(f.id),l[qe]=se(f.name),l[Je]=f.action,l)),p=!0}),t(f,"submit",function(){var l,a;p||s.track(bt,((l={})[De]=se(f.id),l[qe]=se(f.name),l[Je]=f.action,l)),s.track(ln,((a={})[De]=se(f.id),a[qe]=se(f.name),a[Je]=f.action,a)),p=!1})},Array.from(document.getElementsByTagName("form")).forEach(u),typeof MutationObserver<"u"&&(n=new MutationObserver(function(f){f.forEach(function(p){p.addedNodes.forEach(function(l){l.nodeName==="FORM"&&u(l),"querySelectorAll"in l&&typeof l.querySelectorAll=="function"&&Array.from(l.querySelectorAll("form")).map(u)})})})).observe(document.body,{subtree:!0,childList:!0})):r.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked."),[2]})})},execute:function(r){return(0,o.mG)(void 0,void 0,void 0,function(){return(0,o.Jh)(this,function(s){return[2,r]})})},teardown:function(){return(0,o.mG)(void 0,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return n?.disconnect(),i(),[2]})})}}},se=function(n){if(typeof n=="string")return n},Rn=function(){var n,e=[],t=function(r,s,u){r.addEventListener(s,u),e.push({element:r,type:s,handler:u})},i=function(){e.forEach(function(r){var s=r.element,u=r.type,c=r.handler;s?.removeEventListener(u,c)}),e=[]};return{name:"@amplitude/plugin-file-download-tracking-browser",type:"enrichment",setup:function(r,s){return(0,o.mG)(void 0,void 0,void 0,function(){var u,c;return(0,o.Jh)(this,function(f){return s?typeof document>"u"||(u=function(p){try{l=new URL(p.href,window.location.href)}catch{return}var l,a=c.exec(l.href),m=a?.[1];m&&t(p,"click",function(){var _;m&&s.track(dn,((_={})[fn]=m,_[pn]=l.pathname,_[hn]=p.id,_[vn]=p.text,_[gn]=p.href,_))})},c=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/,Array.from(document.getElementsByTagName("a")).forEach(u),typeof MutationObserver<"u"&&(n=new MutationObserver(function(p){p.forEach(function(l){l.addedNodes.forEach(function(a){a.nodeName==="A"&&u(a),"querySelectorAll"in a&&typeof a.querySelectorAll=="function"&&Array.from(a.querySelectorAll("a")).map(u)})})})).observe(document.body,{subtree:!0,childList:!0})):r.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked."),[2]})})},execute:function(r){return(0,o.mG)(void 0,void 0,void 0,function(){return(0,o.Jh)(this,function(s){return[2,r]})})},teardown:function(){return(0,o.mG)(void 0,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return n?.disconnect(),i(),[2]})})}}},Jt=!1,xn=function(n){Jt||n.defaultTracking!==void 0||(n.loggerProvider.warn(`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`),Jt=!0)},An=function(){var n=z(),e=[],t=function(r,s){n&&(n.addEventListener(r,s),e.push({type:r,handler:s}))},i=function(){e.forEach(function(r){var s=r.type,u=r.handler;n&&n.removeEventListener(s,u)}),e=[]};return{name:"@amplitude/plugin-network-checker-browser",type:"before",setup:function(r,s){return(0,o.mG)(void 0,void 0,void 0,function(){return(0,o.Jh)(this,function(u){return r.offline=!navigator.onLine,t("online",function(){r.loggerProvider.debug("Network connectivity changed to online."),r.offline=!1,setTimeout(function(){s.flush()},r.flushIntervalMillis)}),t("offline",function(){r.loggerProvider.debug("Network connectivity changed to offline."),r.offline=!0}),[2]})})},teardown:function(){return(0,o.mG)(void 0,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return i(),[2]})})}}},Nn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return(0,o.ZT)(e,n),e.prototype.init=function(t,i,r){var s,u;return t===void 0&&(t=""),arguments.length>2?(s=i,u=r):typeof i=="string"?(s=i,u=void 0):(s=i?.userId,u=i),U(this._init((0,o.pi)((0,o.pi)({},u),{userId:s,apiKey:t})))},e.prototype._init=function(t){var i,r;return(0,o.mG)(this,void 0,void 0,function(){var s,u,c,f=this;return(0,o.Jh)(this,function(p){var l,a,m,_;switch(p.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,(l=t.apiKey,a=t,m=this,a===void 0&&(a={}),(0,o.mG)(void 0,void 0,void 0,function(){var T,N,E,O,D,P,k,Z,X,B,C,F,ue,ne,ae,j,ie,ge,I,Ce,Ge,je,Me,Ve,Fe,$e,Ke,Qe,Ze,Be,ze,We,Ye,Xe,He,et,tt,nt,it;return(0,o.Jh)(this,function(ce){var rt,ot,st;switch(ce.label){case 0:return T=a.identityStorage||Ee,j={},T===Ee?[3,1]:(E="",[3,5]);case 1:return(ge=(ie=a.cookieOptions)===null||ie===void 0?void 0:ie.domain)!==null&&ge!==void 0?(O=ge,[3,4]):[3,2];case 2:return[4,(0,o.mG)(void 0,void 0,void 0,function(){var re,oe,$,K,ye,me,le;return(0,o.Jh)(this,function(W){switch(W.label){case 0:return[4,new Ae().isEnabled()];case 1:if(!W.sent()||!rt&&typeof location>"u")return[2,""];for(re=(rt??location.hostname).split("."),oe=[],$="AMP_TLDTEST",K=re.length-2;K>=0;--K)oe.push(re.slice(K).join("."));K=0,W.label=2;case 2:return K<oe.length?(me={domain:"."+(ye=oe[K])},[4,(le=new Ae(me)).set($,1)]):[3,7];case 3:return W.sent(),[4,le.get($)];case 4:return W.sent()?[4,le.remove($)]:[3,6];case 5:return W.sent(),[2,"."+ye];case 6:return K++,[3,2];case 7:return[2,""]}})})];case 3:O=ce.sent(),ce.label=4;case 4:E=O,ce.label=5;case 5:return N=o.pi.apply(void 0,[(j.domain=E,j.expiration=365,j.sameSite="Lax",j.secure=!1,j.upgrade=!0,j),a.cookieOptions]),[4,(ot=D=mn(a.identityStorage,N),(st=(Ce=(I=a.cookieOptions)===null||I===void 0?void 0:I.upgrade)===null||Ce===void 0||Ce)===void 0&&(st=!0),(0,o.mG)(void 0,void 0,void 0,function(){var re,oe,$,K,ye,me,le,W,Lt;return(0,o.Jh)(this,function(Te){switch(Te.label){case 0:return re="".concat("amp","_").concat(l.substring(0,6)),[4,ot.getRaw(re)];case 1:return(oe=Te.sent())?st?[4,ot.remove(re)]:[3,3]:[2,{optOut:!1}];case 2:Te.sent(),Te.label=3;case 3:return K=($=(0,o.CR)(oe.split("."),6))[0],ye=$[1],me=$[2],le=$[3],W=$[4],Lt=$[5],[2,{deviceId:K,userId:cn(ye),sessionId:Ue(le),lastEventId:Ue(Lt),lastEventTime:Ue(W),optOut:!!me}]}})}))];case 6:return P=ce.sent(),[4,D.get(vt(l))];case 7:return k=ce.sent(),Z=xe(),X=(Ve=(Me=(je=(Ge=a.deviceId)!==null&&Ge!==void 0?Ge:Z.deviceId)!==null&&je!==void 0?je:k?.deviceId)!==null&&Me!==void 0?Me:P.deviceId)!==null&&Ve!==void 0?Ve:fe(),B=(Fe=k?.lastEventId)!==null&&Fe!==void 0?Fe:P.lastEventId,C=($e=k?.lastEventTime)!==null&&$e!==void 0?$e:P.lastEventTime,F=(Qe=(Ke=a.optOut)!==null&&Ke!==void 0?Ke:k?.optOut)!==null&&Qe!==void 0?Qe:P.optOut,ue=(Ze=k?.sessionId)!==null&&Ze!==void 0?Ze:P.sessionId,ne=(ze=(Be=a.userId)!==null&&Be!==void 0?Be:k?.userId)!==null&&ze!==void 0?ze:P.userId,m.previousSessionDeviceId=(We=k?.deviceId)!==null&&We!==void 0?We:P.deviceId,m.previousSessionUserId=(Ye=k?.userId)!==null&&Ye!==void 0?Ye:P.userId,ae={ipAddress:(He=(Xe=a.trackingOptions)===null||Xe===void 0?void 0:Xe.ipAddress)===null||He===void 0||He,language:(tt=(et=a.trackingOptions)===null||et===void 0?void 0:et.language)===null||tt===void 0||tt,platform:(it=(nt=a.trackingOptions)===null||nt===void 0?void 0:nt.platform)===null||it===void 0||it},[2,new yn(l,a.appVersion,D,N,a.defaultTracking,X,a.flushIntervalMillis,a.flushMaxRetries,a.flushQueueSize,T,a.ingestionMetadata,a.instanceName,B,C,a.loggerProvider,a.logLevel,a.minIdLength,a.offline,F,a.partnerId,a.plan,a.serverUrl,a.serverZone,ue,a.sessionTimeout,a.storageProvider,ae,a.transport,a.useBatch,ne)]}})}))]);case 1:return s=p.sent(),[4,n.prototype._init.call(this,s)];case 2:return p.sent(),this.setSessionId((r=(i=t.sessionId)!==null&&i!==void 0?i:this.config.sessionId)!==null&&r!==void 0?r:Date.now()),(u=he(t.instanceName)).identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===null?[3,4]:[4,this.add(An()).promise];case 3:p.sent(),p.label=4;case 4:return[4,this.add(new jt).promise];case 5:return p.sent(),[4,this.add(new rn).promise];case 6:return p.sent(),[4,this.add(new en).promise];case 7:return p.sent(),xn(this.config),ve(this.config.defaultTracking,"fileDownloads")?[4,this.add(Rn()).promise]:[3,9];case 8:p.sent(),p.label=9;case 9:return ve(this.config.defaultTracking,"formInteractions")?[4,this.add(Pn()).promise]:[3,11];case 10:p.sent(),p.label=11;case 11:return dt(this.config.defaultTracking)?(c=wn(dt((_=this.config).defaultTracking)&&_.defaultTracking&&typeof _.defaultTracking=="object"&&_.defaultTracking.attribution&&typeof _.defaultTracking.attribution=="object"?(0,o.pi)({},_.defaultTracking.attribution):{}),[4,this.add(c).promise]):[3,13];case 12:p.sent(),p.label=13;case 13:return ft(this.config.defaultTracking)?[4,this.add(En(tn(this.config))).promise]:[3,15];case 14:p.sent(),p.label=15;case 15:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 16:return p.sent(),u.eventBridge.setEventReceiver(function(T){f.track(T.eventType,T.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var t;return(t=this.config)===null||t===void 0?void 0:t.userId},e.prototype.setUserId=function(t){if(!this.config){this.q.push(this.setUserId.bind(this,t));return}(t!==this.config.userId||t===void 0)&&(this.config.userId=t,Xt(t,this.config.instanceName))},e.prototype.getDeviceId=function(){var t;return(t=this.config)===null||t===void 0?void 0:t.deviceId},e.prototype.setDeviceId=function(t){if(!this.config){this.q.push(this.setDeviceId.bind(this,t));return}this.config.deviceId=t,Ht(t,this.config.instanceName)},e.prototype.reset=function(){this.setDeviceId(fe()),this.setUserId(void 0)},e.prototype.getSessionId=function(){var t;return(t=this.config)===null||t===void 0?void 0:t.sessionId},e.prototype.setSessionId=function(t){if(!this.config){this.q.push(this.setSessionId.bind(this,t));return}if(t!==this.config.sessionId){var i,r=this.getSessionId(),s=this.config.lastEventTime,u=(i=this.config.lastEventId)!==null&&i!==void 0?i:-1;this.config.sessionId=t,this.config.lastEventTime=void 0,ve(this.config.defaultTracking,"sessions")&&(r&&s&&this.track(It,void 0,{device_id:this.previousSessionDeviceId,event_id:++u,session_id:r,time:s+1,user_id:this.previousSessionUserId}),this.config.lastEventTime=this.config.sessionId,this.track(_t,void 0,{event_id:++u,session_id:this.config.sessionId,time:this.config.lastEventTime})),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId}},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(t){if(!this.config){this.q.push(this.setTransport.bind(this,t));return}this.config.transportProvider=wt(t)},e.prototype.identify=function(t,i){if(Re(t)){var r=t._q;t._q=[],t=Pe(new we,r)}return i?.user_id&&this.setUserId(i.user_id),i?.device_id&&this.setDeviceId(i.device_id),n.prototype.identify.call(this,t,i)},e.prototype.groupIdentify=function(t,i,r,s){if(Re(r)){var u=r._q;r._q=[],r=Pe(new we,u)}return n.prototype.groupIdentify.call(this,t,i,r,s)},e.prototype.revenue=function(t,i){if(Re(t)){var r=t._q;t._q=[],t=Pe(new Mt,r)}return n.prototype.revenue.call(this,t,i)},e.prototype.process=function(t){return(0,o.mG)(this,void 0,void 0,function(){var i,r;return(0,o.Jh)(this,function(s){return i=Date.now(),r=pt(this.config.sessionTimeout,this.config.lastEventTime),t.event_type!==_t&&t.event_type!==It&&(!t.session_id||t.session_id===this.getSessionId())&&r&&this.setSessionId(i),[2,n.prototype.process.call(this,t)]})})},e}(Qt),A={init:y((d=new Nn).init.bind(d),"init",h(d),S(d,["config"])),add:y(d.add.bind(d),"add",h(d),S(d,["config.apiKey","timeline.plugins"])),remove:y(d.remove.bind(d),"remove",h(d),S(d,["config.apiKey","timeline.plugins"])),track:y(d.track.bind(d),"track",h(d),S(d,["config.apiKey","timeline.queue.length"])),logEvent:y(d.logEvent.bind(d),"logEvent",h(d),S(d,["config.apiKey","timeline.queue.length"])),identify:y(d.identify.bind(d),"identify",h(d),S(d,["config.apiKey","timeline.queue.length"])),groupIdentify:y(d.groupIdentify.bind(d),"groupIdentify",h(d),S(d,["config.apiKey","timeline.queue.length"])),setGroup:y(d.setGroup.bind(d),"setGroup",h(d),S(d,["config.apiKey","timeline.queue.length"])),revenue:y(d.revenue.bind(d),"revenue",h(d),S(d,["config.apiKey","timeline.queue.length"])),flush:y(d.flush.bind(d),"flush",h(d),S(d,["config.apiKey","timeline.queue.length"])),getUserId:y(d.getUserId.bind(d),"getUserId",h(d),S(d,["config","config.userId"])),setUserId:y(d.setUserId.bind(d),"setUserId",h(d),S(d,["config","config.userId"])),getDeviceId:y(d.getDeviceId.bind(d),"getDeviceId",h(d),S(d,["config","config.deviceId"])),setDeviceId:y(d.setDeviceId.bind(d),"setDeviceId",h(d),S(d,["config","config.deviceId"])),reset:y(d.reset.bind(d),"reset",h(d),S(d,["config","config.userId","config.deviceId"])),getSessionId:y(d.getSessionId.bind(d),"getSessionId",h(d),S(d,["config"])),setSessionId:y(d.setSessionId.bind(d),"setSessionId",h(d),S(d,["config"])),extendSession:y(d.extendSession.bind(d),"extendSession",h(d),S(d,["config"])),setOptOut:y(d.setOptOut.bind(d),"setOptOut",h(d),S(d,["config"])),setTransport:y(d.setTransport.bind(d),"setTransport",h(d),S(d,["config"]))};A.add,A.extendSession,A.flush,A.getDeviceId,A.getSessionId,A.getUserId,A.groupIdentify,A.identify,A.init,A.logEvent,A.remove,A.reset,A.revenue,A.setDeviceId,A.setGroup,A.setOptOut,A.setSessionId,A.setTransport,A.setUserId;var Un=A.track},97582:function(Ct,ke,Y){Y.d(ke,{CR:function(){return R},Jh:function(){return d},XA:function(){return q},ZT:function(){return M},_T:function(){return H},ev:function(){return x},mG:function(){return de},pi:function(){return L}});var J=function(g,b){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(o[v]=h[v])})(g,b)};function M(g,b){if(typeof b!="function"&&b!==null)throw TypeError("Class extends value "+String(b)+" is not a constructor or null");function o(){this.constructor=g}J(g,b),g.prototype=b===null?Object.create(b):(o.prototype=b.prototype,new o)}var L=function(){return(L=Object.assign||function(g){for(var b,o=1,h=arguments.length;o<h;o++)for(var v in b=arguments[o])Object.prototype.hasOwnProperty.call(b,v)&&(g[v]=b[v]);return g}).apply(this,arguments)};function H(g,b){var o={};for(var h in g)Object.prototype.hasOwnProperty.call(g,h)&&0>b.indexOf(h)&&(o[h]=g[h]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,h=Object.getOwnPropertySymbols(g);v<h.length;v++)0>b.indexOf(h[v])&&Object.prototype.propertyIsEnumerable.call(g,h[v])&&(o[h[v]]=g[h[v]]);return o}function de(g,b,o,h){return new(o||(o=Promise))(function(v,S){function y(G){try{ee(h.next(G))}catch(w){S(w)}}function U(G){try{ee(h.throw(G))}catch(w){S(w)}}function ee(G){var w;G.done?v(G.value):((w=G.value)instanceof o?w:new o(function(Q){Q(w)})).then(y,U)}ee((h=h.apply(g,b||[])).next())})}function d(g,b){var o,h,v,S,y={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return S={next:U(0),throw:U(1),return:U(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function U(ee){return function(G){return function(w){if(o)throw TypeError("Generator is already executing.");for(;S&&(S=0,w[0]&&(y=0)),y;)try{if(o=1,h&&(v=2&w[0]?h.return:w[0]?h.throw||((v=h.return)&&v.call(h),0):h.next)&&!(v=v.call(h,w[1])).done)return v;switch(h=0,v&&(w=[2&w[0],v.value]),w[0]){case 0:case 1:v=w;break;case 4:return y.label++,{value:w[1],done:!1};case 5:y.label++,h=w[1],w=[0];continue;case 7:w=y.ops.pop(),y.trys.pop();continue;default:if(!(v=(v=y.trys).length>0&&v[v.length-1])&&(w[0]===6||w[0]===2)){y=0;continue}if(w[0]===3&&(!v||w[1]>v[0]&&w[1]<v[3])){y.label=w[1];break}if(w[0]===6&&y.label<v[1]){y.label=v[1],v=w;break}if(v&&y.label<v[2]){y.label=v[2],y.ops.push(w);break}v[2]&&y.ops.pop(),y.trys.pop();continue}w=b.call(g,y)}catch(Q){w=[6,Q],h=0}finally{o=v=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([ee,G])}}}function q(g){var b=typeof Symbol=="function"&&Symbol.iterator,o=b&&g[b],h=0;if(o)return o.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&h>=g.length&&(g=void 0),{value:g&&g[h++],done:!g}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(g,b){var o=typeof Symbol=="function"&&g[Symbol.iterator];if(!o)return g;var h,v,S=o.call(g),y=[];try{for(;(b===void 0||b-- >0)&&!(h=S.next()).done;)y.push(h.value)}catch(U){v={error:U}}finally{try{h&&!h.done&&(o=S.return)&&o.call(S)}finally{if(v)throw v.error}}return y}function x(g,b,o){if(o||arguments.length==2)for(var h,v=0,S=b.length;v<S;v++)!h&&v in b||(h||(h=Array.prototype.slice.call(b,0,v)),h[v]=b[v]);return g.concat(h||Array.prototype.slice.call(b))}typeof SuppressedError=="function"&&SuppressedError}}]);
